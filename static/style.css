*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; width:100vw; height:calc(var(--vh,1vh)*100); overflow:hidden; font-family:'Cinzel Decorative','Georgia',serif; }
:root{ --chat-h:64px; --tools-gap:10px; }

.fond-cosmique{ position:fixed; inset:0; z-index:0; background:url('/static/assets/fond_cosmique.jpg') center/cover no-repeat; }

#en-tete{ position:relative; z-index:2; padding-top: calc(8px + env(safe-area-inset-top)); }
.titre-sacré{
  text-align:center; color:#ffe066; font-weight:700; letter-spacing:.11em;
  text-shadow:0 0 10px #000, 0 0 32px #ffe066;
  margin: 4px 12px 6px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-size: clamp(14px, 4.4vw, 34px);
}
.phrase-sacrée{
  text-align:center; color:#fff9c4; font-style:italic;
  text-shadow:0 0 4px #000, 0 0 18px #ffe066;
  font-size: clamp(13px, 3.2vw, 18px);
  margin: 0 12px 8px;
}

/* Colonne d’outils (gauche, sous le titre) */
#tools-column{
  position:fixed; left:12px; z-index:10050;
  display:flex; flex-direction:column; gap:var(--tools-gap);
}
.tool-btn{
  background:rgba(32,28,8,.60); color:#ffe066; border:1px solid rgba(255,224,102,.25);
  width:44px; height:44px; border-radius:30px; font-size:1.12em; cursor:pointer; backdrop-filter:blur(2px);
  box-shadow:0 0 7px rgba(255,224,102,.22); transition:background .12s, box-shadow .13s, transform .12s, border-color .12s;
}
.tool-btn:hover,.tool-btn:focus{ background:#ffe066; color:#2c2108; transform:translateY(-1px); border-color:rgba(255,224,102,.55); box-shadow:0 0 16px 4px #ffe06699; }

/* bouton sanctuaire en haut-droite sous le titre */
#bouton-sanctuaire{
  position:fixed; right:12px; left:auto;
  width:44px; height:44px; border-radius:30px;
  top: calc(70px + env(safe-area-inset-top)); /* JS le recale précisément */
  z-index:10060;
  background:rgba(32,28,8,.60); color:#ffe066; border:1px solid rgba(255,224,102,.25);
  box-shadow:0 0 7px rgba(255,224,102,.22);
}
#bouton-sanctuaire:hover{ background:#ffe066; color:#2c2108; }

/* Œil */
.oeil-centre{ position:relative; z-index:2; width:clamp(260px,62vw,440px); margin:clamp(8px,2.5vh,24px) auto 0; }
#oeil-anim{ display:block; width:100%; height:auto; object-fit:contain; }
#aura-ankaa{ position:absolute; left:50%; top:52%; transform:translate(-50%,-50%); pointer-events:none; z-index:1; width:96%; height:72%;
  filter:blur(16px) brightness(1.05); background:radial-gradient(ellipse 60% 42% at 50% 50%, #ffe06666 15%, #ffe06622 60%, #0000 100%);
  opacity:0; transition:opacity .25s ease; }
#aura-ankaa.active{ opacity:.78; }
@keyframes battement{ 0%,100%{transform:scale(1)} 50%{transform:scaleX(1.03) scaleY(0.98)} }
.oeil-centre.playing #oeil-anim{ animation:battement 3s ease-in-out infinite; }

/* Papyrus */
.papyrus-cercle{
  position:fixed; left:2vw;
  bottom:calc(var(--chat-h) + 28px + env(safe-area-inset-bottom));
  max-width:min(80vw,680px); z-index:3000; padding:14px 16px;
  background:rgba(0,0,0,.38); border:1.2px solid #e7cd7280; border-radius:18px 28px 18px 28px;
  box-shadow:0 2px 16px #e7cd7296; color:#FFFFF0; backdrop-filter:blur(2.2px);
  display:flex; align-items:flex-end;
}
#papyrus-texte{ white-space:pre-wrap; word-break:break-word; font-size:clamp(13px,1.9vw,17px); line-height:1.42; }

/* Zone chat */
.zone-chat{
  position:fixed; z-index:3; left:50%; transform:translateX(-50%);
  bottom:calc(12px + env(safe-area-inset-bottom));
  display:grid; grid-template-columns:1fr auto; gap:10px; width:min(880px,92vw);
}
.zone-chat input,.zone-chat button{
  height:48px; line-height:48px; font-size:16px; padding:0 12px;
  border-radius:10px; border:none; outline:none; background:rgba(0,0,0,.72); color:#FFF1DC;
}
#btn-verbe{ min-width:54px; font-weight:700; letter-spacing:.06em; transition:background .12s, box-shadow .12s, transform .12s; }
#btn-verbe:hover,#btn-verbe:focus{ background:#fff5c0; color:#2c2108; box-shadow:0 0 6px 2px #ffe06677; }
#btn-verbe.active{ background:#ffe066; color:#2c2108; transform:translateY(-1px); box-shadow:0 0 8px 2px #ffe06699, 0 0 1px 1px #222 inset; }

#points-sacrés{ position:fixed; bottom:2vh; left:2vw; z-index:9999; font:700 24px 'Papyrus',serif; color:#084638; letter-spacing:6px; display:none; animation:clignote 1.2s infinite ease-in-out; }
@keyframes clignote{ 0%{opacity:.2} 50%{opacity:1} 100%{opacity:.2} }

#mode-overlay{ position:fixed; inset:0; z-index:10000; display:grid; place-items:center; }
.overlay-hidden{ display:none !important; }
.overlay-backdrop{
  position:absolute; inset:0;
  background:
    radial-gradient(1200px 800px at 42% 28%, rgba(255,224,102,.06), rgba(0,0,0,.86) 58%),
    radial-gradient(900px 600px  at 70% 72%, rgba(255,224,102,.04), rgba(0,0,0,.92) 70%),
    rgba(0,0,0,.84);
  backdrop-filter:blur(6px) saturate(108%);
}
.overlay-panel{
  position:relative; z-index:2; width:min(720px,92vw); padding:16px 16px 14px; border-radius:22px;
  background:linear-gradient(180deg, rgba(26,20,9,.95), rgba(12,9,5,.975));
  box-shadow:0 0 28px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.35);
  color:#fff7e1; text-align:center; animation:fadeIn .35s ease-out both;
}
.overlay-head{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:0; }
#mode-title{ color:#ffe066; letter-spacing:.08em; font-variant:small-caps; margin:0; text-shadow:0 0 14px rgba(255,224,102,.35); transform:translateY(-4px); }
.mode-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; width:min(640px,88%); margin:8px auto 6px; }
.mode-option{
  background:linear-gradient(180deg, rgba(34,28,10,.78), rgba(20,16,6,.86)),
             radial-gradient(120% 120% at -20% -30%, rgba(255,224,102,.10), transparent 60%);
  border:1px solid rgba(255,224,102,.28); border-radius:16px; padding:14px 12px; cursor:pointer; color:#fff7e1;
  box-shadow:0 0 8px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.28);
  transition:transform .12s, box-shadow .14s, border-color .14s, background .14s;
  display:flex; align-items:center; justify-content:center; gap:10px;
}
