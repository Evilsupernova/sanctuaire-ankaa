/* Reset & fullscreen */
html, body {
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: 'Cinzel Decorative', 'Georgia', serif;
  background: none;
}

/* Désactivation visuelle quand disabled */
#btn-mode-mini:disabled,
#btn-veille-mini:disabled,
#btn-verbe:disabled {
  opacity: 0.43 !important;
  pointer-events: none !important;
  filter: grayscale(60%);
}

/* Fond cosmique */
.fond-cosmique {
  background: url('/static/assets/fond_cosmique.jpg') no-repeat center/cover;
  position: fixed;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  background-attachment: fixed;
  will-change: transform;
  transition: transform 0.1s ease-out;
}

/* Titre */
.titre-sacré {
  text-align: center;
  color: #ffe066;
  font-size: 3vw; font-weight: bold; letter-spacing: 0.11em;
  margin-top: 13px; text-shadow: 0 0 10px #000, 0 0 32px #ffe066;
  z-index: 2; position: relative; line-height: 1.1;
  display: flex; align-items: center; justify-content: center;
}
.glyph { margin: 0 0.6vw; font-size: 1.1em; vertical-align: middle; display: inline-block; }

/* Phrase */
.phrase-sacrée {
  margin: 18px 0 45px; text-align: center;
  color: #fff9c4; font-size: 2vw; font-style: italic;
  text-shadow: 0 0 4px #000, 0 0 18px #ffe066;
  z-index: 2; position: relative;
}

/* Œil & aura */
.oeil-centre { position: relative; width: 590px; margin: -2cm auto; }
#oeil-anim { width: 100%; }
@keyframes battement-sacré { 0%,100%{transform:scale(1)} 50%{transform:scaleX(1.03) scaleY(0.98)} }
@keyframes aura-sacrée { 0%,100%{filter:drop-shadow(0 0 10px rgba(255,233,127,.5));transform:scale(1)} 50%{filter:drop-shadow(0 0 30px rgba(255,233,127,.8));transform:scale(1.035)} }
.oeil-centre, #oeil-anim { animation: none; }
.oeil-centre.playing { animation: aura-sacrée 3s ease-in-out infinite; }
.oeil-centre.playing #oeil-anim { animation: battement-sacré 3s ease-in-out infinite; }

#aura-ankaa {
  position: absolute; left: 50%; top: 53%; transform: translate(-50%,-50%);
  width: 570px; height: 310px; pointer-events: none; z-index: 3;
  filter: blur(18px) brightness(1.04);
  background: radial-gradient(ellipse 52% 38% at 50% 48%, #ffe066 15%, #ffe06622 60%, #0000 100%);
  opacity: 0; transition: opacity .3s, filter .18s;
}
#aura-ankaa.active { animation: aura-sacrée 3s ease-in-out infinite; opacity: .74; }

/* Papyrus */
.papyrus-cercle {
  position: fixed; left: 2vw; bottom: calc(4vh + 1.6cm);
  max-width: 80vw; padding: 16px 18px;
  background: rgba(255,255,255,.14); border: 1.2px solid #e7cd7280;
  border-radius: 18px 28px 18px 28px; box-shadow: 0 2px 16px #e7cd7296;
  font-family: 'Papyrus','Segoe UI','Arial',sans-serif; font-size: 1.1rem; color: #FFFFF0;
  z-index: 3000; display: flex; align-items: flex-end;
  overflow-x: auto; overflow-y: hidden; backdrop-filter: blur(2.2px);
}
#papyrus-texte { font-size: 1.3rem; line-height: 1.4; color: #FFFFF0; text-shadow: 0 0 4px rgba(0,0,0,.3); white-space: pre-wrap; word-break: break-word; }

/* Zone d’invocation */
.zone-chat { position: fixed; bottom: 3vw; left: 50%; transform: translateX(-50%); display: flex; z-index: 3; }
.zone-chat input, .zone-chat button {
  height: 1.4cm !important; line-height: 1.4cm !important;
  font-size: 1rem !important; padding: 0 1rem !important;
  border-radius: .3rem !important; border: none; outline: none;
  background: rgba(0,0,0,.7) !important; color: #FFFFF0 !important;
}

/* Bouton Invoquer */
#btn-verbe.active {
  background: #ffe066 !important; color: #2c2108 !important;
  box-shadow: 0 0 8px 2px #ffe06699, 0 0 1px 1px #222 inset;
  border-radius: 2em; font-weight: 700; letter-spacing: .06em; transition: all .13s;
}
#btn-verbe:hover, #btn-verbe:focus {
  background: #fff5c0 !important; color: #2c2108 !important; box-shadow: 0 0 6px 2px #ffe06677;
}

/* Points sacrés */
#points-sacrés {
  position: fixed; bottom: 2%; left: 2%; z-index: 9999;
  font: 700 28px 'Papyrus',serif; color: #084638; letter-spacing: 6px;
  display: none; animation: clignote-sacré 1.2s infinite ease-in-out;
}
@keyframes clignote-sacré { 0%{opacity:.2} 50%{opacity:1} 100%{opacity:.2} }

/* Bouton Sanctuaire */
#sanctuaire-container { position: fixed; top: 13px; right: 13px; z-index: 99; }
.btn-ankh {
  background: rgba(34,27,10,.22); border: none; border-radius: 88px;
  padding: .22em .44em; min-width: 0; font-size: 2.1em; cursor: pointer; opacity: .44;
  transition: opacity .16s, box-shadow .19s, background .12s;
  box-shadow: 0 0 8px #dac65a38; color: #ecd971; display: flex; align-items: center; justify-content: center;
}
.btn-ankh:hover,.btn-ankh:focus { opacity:.88; background: rgba(44,38,18,.23); box-shadow: 0 0 16px 6px #dac65a99, 0 0 2px #fff7de99; }
.glyph-ankh { font-family:"Noto Sans Egyptian Hieroglyphs",serif; font-size:.6em; color:#ecd971; filter:drop-shadow(0 0 6px #dac65a88); pointer-events:none; }

/* ☥ mini — HAUT GAUCHE */
#mode-selector-mini {
  position: fixed;
  top: 14px;             /* était bottom: 14px; */
  left: 14px;
  bottom: auto;          /* important pour annuler l'ancienne règle */
  z-index: 10050;
}
#btn-mode-mini {
  background: rgba(32,28,8,.60);
  color: #ffe066;
  border: 1px solid rgba(255,224,102,.25);
  width: 44px; height: 44px; border-radius: 30px;
  font-size: 1.05em; cursor: pointer; backdrop-filter: blur(2px);
  box-shadow: 0 0 7px rgba(255,224,102,.22);
  transition: background .12s, box-shadow .13s, transform .12s, border-color .12s;
}
#btn-mode-mini:hover,#btn-mode-mini:focus {
  background:#ffe066; color:#2c2108; transform:translateY(-1px);
  border-color:rgba(255,224,102,.55); box-shadow:0 0 16px 4px #ffe06699;
}

/* (optionnel) sur écrans étroits, descend un peu pour éviter le titre */
@media (max-width: 720px){
  #mode-selector-mini { top: 10px; left: 10px; }
}

/* Veille mini */
#btn-veille-mini {
  position: fixed; bottom: 38px; right: 38px; z-index: 2222;
  background: rgba(32,28,8,.6); color: #ffe066; border: none; font-size: 1.34em;
  border-radius: 30px; width: 38px; height: 38px; box-shadow: 0 0 7px #ffe06622; cursor: pointer;
  transition: background .12s, box-shadow .13s; display: flex; align-items: center; justify-content: center;
}
#btn-veille-mini:hover, #btn-veille-mini.active { background: #ffe066; color:#2c2108; box-shadow: 0 0 14px 3px #ffe06688; }

/* Effets sacrés complémentaires */
#papyrus-texte { animation: verbeVibration 2.2s cubic-bezier(.7,.04,.38,1) 1; }
@keyframes verbeVibration { 0%{letter-spacing:.22em;opacity:0;color:#ffe066} 24%{opacity:1} 85%{color:#fff8e7} 100%{letter-spacing:.07em} }
#btn-verbe.active,#btn-veille-mini.active { animation: btnPulse 1.09s infinite alternate; box-shadow:0 0 18px 7px #ffe066c8; }
@keyframes btnPulse { from{box-shadow:0 0 8px 2px #ffe06677} to{box-shadow:0 0 24px 7px #ffe066bb} }

/* ========== OVERLAY sacré (beau et sobre) ========== */
#mode-overlay { position: fixed; inset: 0; z-index: 10000; display: grid; place-items: center; }
.overlay-hidden { display: none !important; }

.overlay-backdrop{
  position:absolute; inset:0;
  background:
    radial-gradient(1200px 800px at 42% 28%, rgba(255,224,102,.06), rgba(0,0,0,.86) 58%),
    radial-gradient(900px 600px  at 70% 72%, rgba(255,224,102,.04), rgba(0,0,0,.92) 70%),
    rgba(0,0,0,.84);
  backdrop-filter: blur(6px) saturate(108%);
}

.overlay-panel{
  position:relative; z-index:2; width:min(720px,92vw); padding:22px 18px 18px; border-radius:22px;
  background:linear-gradient(180deg, rgba(26,20,9,.95), rgba(12,9,5,.975));
  box-shadow: 0 0 28px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.35);
  color:#fff7e1; text-align:center; animation: fadeIn .45s ease-out both;
}
.overlay-head{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:6px; }
.overlay-head .ankh{ color:#ffe066; filter:drop-shadow(0 0 6px rgba(255,224,102,.45)); }
#mode-title{ color:#ffe066; letter-spacing:.08em; font-variant:small-caps; margin:0; text-shadow:0 0 14px rgba(255,224,102,.35); }
.overlay-sub{ color:#f0e6c4; opacity:.9; margin:2px 0 10px; }

.mode-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; width:min(640px, 88%); margin:0 auto; }
.mode-option{
  background:
    linear-gradient(180deg, rgba(34,28,10,.78), rgba(20,16,6,.86)),
    radial-gradient(120% 120% at -20% -30%, rgba(255,224,102,.10), transparent 60%);
  border:1px solid rgba(255,224,102,.28); border-radius:16px; padding:14px 12px; cursor:pointer; color:#fff7e1;
  box-shadow: 0 0 8px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.28);
  transition: transform .12s, box-shadow .14s, border-color .14s, background .14s;
  display:flex; align-items:center; justify-content:center; gap:10px;
}
.mode-option:hover,.mode-option:focus{ transform: translateY(-2px) scale(1.02); border-color: rgba(255,224,102,.55); box-shadow: 0 0 18px rgba(255,224,102,.22); }
.mode-sign{ font-size:1.2rem; line-height:1; color:#ffe066; }
.mode-name{ font-size:1.02rem; letter-spacing:.02em; }
.overlay-note{ margin-top:10px; color:#eeddbe; opacity:.9; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(6px) scale(.98);} to { opacity: 1; transform: translateY(0) scale(1);} }

@media (max-width:720px){ .mode-grid{ grid-template-columns:1fr; width:90%; } }
/* Lift léger du titre dans l'overlay */
#mode-overlay .overlay-panel { padding-top: 14px; }
#mode-overlay .overlay-head  { margin-bottom: 2px; }
#mode-title { transform: translateY(-6px); }

/* ===== Mobile safe (iPhone/Android) ===== */
html, body { height: 100%; overscroll-behavior: none; }
body {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  min-height: 100dvh;
}
input, textarea, button {
  -webkit-text-size-adjust: 100%;
  touch-action: manipulation;
}
