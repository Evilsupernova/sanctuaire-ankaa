*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; width:100vw; height:calc(var(--vh,1vh)*100); overflow:hidden; font-family:'Cinzel Decorative','Georgia',serif; }
:root{ --chat-h:64px; --tools-gap:16px; }

.fond-cosmique{ position:fixed; inset:0; z-index:0; background:url('/static/assets/fond_cosmique.jpg') center/cover no-repeat; }

/* Header */
#en-tete{ position:relative; z-index:2; padding-top: calc(8px + env(safe-area-inset-top)); }
.titre-sacré{
  text-align:center; color:#ffe066; font-weight:700; letter-spacing:.09em;
  text-shadow:0 0 10px #000, 0 0 32px #ffe066;
  margin: 4px 12px 4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  font-size: clamp(18px, 4.8vw, 34px);
}
.phrase-sacrée{
  text-align:center; color:#fff9c4; font-style:italic;
  text-shadow:0 0 4px #000, 0 0 18px #ffe066;
  font-size: clamp(14px, 3.3vw, 19px);
  margin: 0 12px 0;
}

/* BARRE D’OUTILS — entre le titre et l’œil (un peu plus bas) */
#tools-column{
  position:relative;
  margin: 14px auto 8px;
  display:flex; justify-content:center; align-items:center; gap:var(--tools-gap);
  width:min(92vw,840px); z-index:10050;
}
.tool-btn{
  background:rgba(34,28,10,.62); color:#ffe066; border:1px solid rgba(255,224,102,.25);
  width:52px; height:52px; border-radius:30px; font-size:1.12em; cursor:pointer; backdrop-filter:blur(2px);
  box-shadow:0 0 10px rgba(255,224,102,.18); transition:transform .12s, background .18s, border-color .18s, box-shadow .18s;
}
.tool-btn:hover,.tool-btn:focus{ transform:translateY(-1px) scale(1.04); background:#ffe066; color:#2c2108; border-color:rgba(255,224,102,.55); box-shadow:0 0 18px 4px #ffe06677; }
.tool-btn.active{ background:#ffe066; color:#2c2108; box-shadow:0 0 10px 2px #ffe06677; }

/* ŒIL — un peu plus grand et encore -5% à gauche */
.oeil-centre{
  position:relative; z-index:2; width:clamp(500px,82vw,820px);
  margin: 10px auto 0; transform: translateX(-5%); /* décalage gauche total */
}
#oeil-anim{ display:block; width:100%; height:auto; object-fit:contain; margin:0 auto; }
#aura-ankaa{ position:absolute; left:50%; top:52%; transform:translate(-50%,-50%); pointer-events:none; z-index:1; width:100%; height:78%;
  filter:blur(18px) brightness(1.05); background:radial-gradient(ellipse 62% 44% at 50% 50%, #ffe06666 15%, #ffe06622 60%, #0000 100%);
  opacity:0; transition:opacity .25s ease; }
#aura-ankaa.active{ opacity:.82; }
@keyframes battement{ 0%,100%{transform:scale(1)} 50%{transform:scaleX(1.03) scaleY(0.98)} }
.oeil-centre.playing #oeil-anim{ animation:battement 3s ease-in-out infinite; }

/* BOUTON SANCTUAIRE (bas-centre, disparaît après ouverture) */
#bouton-sanctuaire{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(14px + env(safe-area-inset-bottom));
  z-index:10060; width:56px; height:56px; border-radius:40px;
  background:rgba(32,28,8,.70); color:#ffe066; border:1px solid rgba(255,224,102,.35);
  box-shadow:0 4px 16px rgba(0,0,0,.35), 0 0 10px rgba(255,224,102,.28);
  font-size:1.25em;
}
#bouton-sanctuaire:hover{ background:#ffe066; color:#2c2108; }

/* PAPYRUS — à gauche, synchro avec la voix */
.papyrus-cercle{
  position:fixed; left:6vw; right:auto;
  bottom:calc(var(--chat-h) + 22px + env(safe-area-inset-bottom));
  max-width:min(78vw,860px); z-index:3000; padding:14px 16px;
  background:rgba(0,0,0,.42); border:1.2px solid #e7cd7280; border-radius:18px 28px 18px 28px;
  box-shadow:0 2px 16px #e7cd7296; color:#FFFFF0; backdrop-filter:blur(2.2px);
  display:none; align-items:flex-end;
}
#papyrus-texte{
  white-space:pre-wrap; word-break:break-word; font-size:clamp(14px,1.9vw,18px); line-height:1.42;
  max-height:28vh; overflow:auto; scrollbar-width:thin;
}

/* ZONE CHAT */
.zone-chat{
  position:fixed; z-index:3; left:50%; transform:translateX(-50%);
  bottom:calc(12px + env(safe-area-inset-bottom));
  display:grid; grid-template-columns:1fr auto; gap:10px; width:min(880px,92vw);
}
.zone-chat input,.zone-chat button{
  height:48px; line-height:48px; font-size:16px; padding:0 12px;
  border-radius:10px; border:none; outline:none; background:rgba(0,0,0,.72); color:#FFF1DC;
}
#btn-verbe{ min-width:54px; font-weight:700; letter-spacing:.06em; transition:background .12s, box-shadow .12s, transform .12s; }
#btn-verbe:hover,#btn-verbe:focus{ background:#fff5c0; color:#2c2108; box-shadow:0 0 6px 2px #ffe06677; }
#btn-verbe.active{ background:#ffe066; color:#2c2108; transform:translateY(-1px); box-shadow:0 0 8px 2px #ffe06699, 0 0 1px 1px #222 inset; }

/* OVERLAY MODES */
#mode-overlay{ position:fixed; inset:0; z-index:10000; display:grid; place-items:center; }
.overlay-hidden{ display:none !important; }
.overlay-backdrop{
  position:absolute; inset:0;
  background:
    radial-gradient(1200px 800px at 42% 28%, rgba(255,224,102,.06), rgba(0,0,0,.86) 58%),
    radial-gradient(900px 600px  at 70% 72%, rgba(255,224,102,.04), rgba(0,0,0,.92) 70%),
    rgba(0,0,0,.84);
  backdrop-filter:blur(6px) saturate(108%);
}
.overlay-panel{
  position:relative; z-index:2; width:min(720px,92vw); padding:16px 16px 14px; border-radius:22px;
  background:linear-gradient(180deg, rgba(26,20,9,.95), rgba(12,9,5,.975));
  box-shadow:0 0 28px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.35);
  color:#fff7e1; text-align:center; animation:fadeIn .35s ease-out both;
}
.overlay-head{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:0; }
#mode-title{ color:#ffe066; letter-spacing:.08em; font-variant:small-caps; margin:0; text-shadow:0 0 14px rgba(255,224,102,.35); transform:translateY(-4px); }
.mode-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; width:min(640px,88%); margin:8px auto 6px; }
.mode-option{
  background:linear-gradient(180deg, rgba(34,28,10,.78), rgba(20,16,6,.86)),
             radial-gradient(120% 120% at -20% -30%, rgba(255,224,102,.10), transparent 60%);
  border:1px solid rgba(255,224,102,.28); border-radius:16px; padding:14px 12px; cursor:pointer; color:#fff7e1;
  box-shadow:0 0 8px rgba(255,224,102,.12), inset 0 0 1px rgba(255,224,102,.28);
  transition:transform .12s, box-shadow .14s, border-color .14s, background .14s;
  display:flex; align-items:center; justify-content:center; gap:10px;
}
.mode-option:hover,.mode-option:focus{ transform:translateY(-2px) scale(1.02); border-color:rgba(255,224,102,.55); box-shadow:0 0 18px rgba(255,224,102,.22); }

.toast{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(20px + env(safe-area-inset-bottom)); z-index:12000;
  background:rgba(0,0,0,.75); color:#fff; padding:8px 12px; border-radius:10px; font-size:14px;
}